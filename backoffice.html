<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BackOffice</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container w-50">
      <form>
        <div class="mb-4">
          <label class="form-label">Inserisci il nome del prodotto</label>
          <input
            type="text"
            class="form-control"
            id="nameProduct"
            placeholder="Nome"
            required
          />
        </div>
        <div class="mb-4">
          <label class="form-label"
            >Inserisci la descrizione del prodotto</label
          >
          <input
            type="text"
            class="form-control"
            id="descriptionProduct"
            placeholder="Descrizione"
            required
          />
        </div>
        <div class="mb-4">
          <label class="form-label">Inserisci il brand prodotto</label>
          <input
            type="text"
            class="form-control"
            id="brandProduct"
            placeholder="Brand"
            required
          />
        </div>
        <div class="mb-4">
          <label class="form-label">Inserisci il prezzo del prodotto</label>
          <input
            type="number"
            class="form-control"
            id="priceProduct"
            placeholder="Prezzo"
            required
          />
        </div>
        <div class="mb-4">
          <label class="form-label">Inserisci l immagine del prodotto</label>
          <input
            type="text"
            class="form-control"
            id="imgProduct"
            placeholder="URL"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary">Carica Prodotto</button>
        <button id="saveChange" class="btn btn-primary d-none">
          Aggiorna Modifiche
        </button>
      </form>
    </div>
    <div class="container mt-5" id="Home">
      <div class="row column-gap-5" id="rowHome">
        <!--   <div class="card" style="width: 18rem">
        <img
          src="data:image/jpeg;base64,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erCrHCGz821+rCDbAL2i1P8AMNn5tr9Wvf5hs/Ntfq0G1ovCFq/5hs/Ntfq15/MNn5tr9Wgz5Bj6Py/7VshYJ09ZiQSy1kitPg9+aHhBZvN2r1aDJcFbeFjnT1m83a/Vq2dOWfzdr9WgvuCtOCsu01Z/N2v1atu0zZ/N2v1aC+GqQaIbRqi3jmDzVr9UsmHhUxgo2G0+mI96CYFW60NQoyzhdewEM3pju/m4LKj0xK/KFw67nvoJRFIHCvaq1qNGvnLgXBgZQ3sca7NpW3QEREBWZrOHZkq8iDXv0Uw71a8Rxraog1XiONe+I41tEQavxJGniSNbREGr8SRr3xLGtmiDWeJY08SxrZog1niWNPEsa2aINZ4ljTxLGtmiDWeJY08SxrZog1fiSNPEka2iINX4kjTxJGtoiDV+JI08RxraIg1XiONXI9EMG0rYogx4rKG5ErIREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERB//9k="
          class="card-img-top"
        />
        <div class="card-body">
          <h5>nome</h5>
          <p>descrizione</p>
        </div>
        <ul class="list-group">
          <li class="list-group-item">brand</li>
          <li class="list-group-item">prezzo</li>
        </ul>
        <div class="card-body">
          <a href="#">btn1</a>
          <a href="#">btn2</a>
        </div>
      </div> -->
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const array = [];
      const arrayID = [];
      //bottone carica prodotti
      const btn = document.querySelector("button");

      //row contenente colonne con i prodotti creati
      const row = document.getElementById("rowHome");

      //funzione carica prodotti attraverso il form html
      function caricaProdotti(e) {
        e.preventDefault();

        const URL = "https://striveschool-api.herokuapp.com/api/product/";
        const Prodotto = {
          name: document.getElementById("nameProduct").value,
          description: document.getElementById("descriptionProduct").value,
          brand: document.getElementById("brandProduct").value,
          imageUrl: document.getElementById("imgProduct").value,
          price: document.getElementById("priceProduct").value,
        };

        fetch(URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization:
              "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NjE4ZTc0MDdmMzA0NjAwMWFlNTlmNjAiLCJpYXQiOjE3MTI5MDg4NDAsImV4cCI6MTcxNDExODQ0MH0.-j1xw3zhLtazZ0oy_Zv9WzrQzHlAsOJ_XDGSll4kP58",
          },
          body: JSON.stringify(Prodotto),
        })
          .then((resp) => {
            if (resp.ok) {
              return resp.json();
            } else {
              throw new Error("Errore nella fetch");
            }
          })
          .then((data) => {
            /*  const nameChange = data.name;
            const descriptionChange = data.description;
            const brandChange = data.brand;
            const imageChange = data.imageUrl;
            const priceChange = data.name; */

            let colTemplate = `
                  <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
            <img src=${
              data.imageUrl
            } id="card-img" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">${data.name.toUpperCase()}</h5>
              <p id="card-desc" class="card-text">${data.description}</p>
              <p id="card-brand" class="card-text text-body-secondary">${
                data.brand
              }</small></p>
              <p id="card-price" class="card-text text-body-secondary">${
                data.price
              }</small></p>
              <button type="button" class="btn btn-outline-dark">VIEW</button>
              <button type="button" id="change" class="btn btn-outline-dark">MODIFICA</button>
            </div>
          </div>
        </div>
      </div>
          `;
            resetForm();

            row.innerHTML += colTemplate;
            const btnChange = document.querySelectorAll("#change");
            btnChange.forEach((btn) => {
              btn.addEventListener("click", (e) => {
                console.log(e.target);
                const card = e.target.closest(".card");
                const cardTitle = card.querySelector(".card-title").textContent;
                const cardDesc = card.querySelector("#card-desc").textContent;
                const cardBrand = card.querySelector("#card-brand").textContent;
                const cardImg = card
                  .querySelector("#card-img")
                  .getAttribute("src");
                const cardPrice = card.querySelector("#card-price").textContent;
                document.getElementById("nameProduct").value = cardTitle;
                document.getElementById("descriptionProduct").value = cardDesc;
                document.getElementById("brandProduct").value = cardBrand;
                document.getElementById("imgProduct").value = cardImg;
                document.getElementById("priceProduct").value = cardPrice;
                const saveChange = document.querySelector("#saveChange");
                saveChange.className = "btn btn-primary";
                saveChange.addEventListener("click", (e) => {
                  console.log(e);
                  e.preventDefault();
                  const updateData = {
                    name: document.getElementById("nameProduct").value,
                    description:
                      document.getElementById("descriptionProduct").value,
                    brand: document.getElementById("brandProduct").value,
                    price: document.getElementById("priceProduct").value,
                  };
                });
              });
            });
          })
          .catch((error) => {
            console.error("Errore:", error);
          });
      }

      //funzione resetta dati form
      function resetForm() {
        document.getElementById("nameProduct").value = "";
        document.getElementById("descriptionProduct").value = "";
        document.getElementById("brandProduct").value = "";
        document.getElementById("imgProduct").value = "";
        document.getElementById("priceProduct").value = "";
      }

      window.onload = () => {
        btn.addEventListener("click", caricaProdotti);
      };
    </script>
  </body>
</html>
